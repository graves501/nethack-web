<!-- Simple UI for testing -->
<input id="menu" />
<button onclick="select()">Send</button>

<div id="data"></div>

<script src="./nethack.js"></script>
<script>
  function select() {
    const input = document.querySelector("#menu");
    const ids = input.value
      .split(",")
      .filter((x) => x !== "")
      .map((x) => parseInt(x));
    window.nethackJS.selectMenu(ids);
  }

  document.onkeypress = (ev) => {
    window.nethackJS.sendInput(ev.keyCode);
  };

  setTimeout(() => {
    const dataContainer = document.querySelector("#data");
    const values = window.nethackGlobal.constants;
    Object.keys(values).forEach((key) => {
      const value = values[key];
      const div = document.createElement("div");

      Object.keys(value)
        .filter((x) => isNaN(parseInt(x)))
        .forEach((key) => {
          const child = document.createElement("div");
          child.innerHTML = `${key}: ${value[key]}`;
          div.appendChild(child);
        });

      dataContainer.appendChild(div);
    });
  }, 2000);
</script>
